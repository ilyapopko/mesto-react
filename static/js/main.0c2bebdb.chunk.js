(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(8),o=n.n(r),s=(n(16),n(11)),i=n(3),u=n.n(i),l=n(4),p=n(2),d=n(0),b=function(){return Object(d.jsx)("header",{className:"header",children:Object(d.jsx)("a",{href:"#",className:"header__logo","aria-label":"\u041b\u043e\u0433\u043e\u0442\u0438\u043f",target:"_blank"})})},f=c.a.createContext(),j=function(e){var t=e.card,n=e.onCardClick,c=e.onCardLike,r=e.onCardDelete,o=e.onEditCard,s=e.onHoverCardCaption,i=e.onHoverLikeCard,u=e.onOutHover,l=Object(a.useContext)(f),p=Object(a.useRef)(),b=Object(a.useRef)(),j=Object(a.useRef)(),O=t.owner._id===l._id,h=t.likes.some((function(e){return e._id===l._id})),m=Object(a.useState)(!1);function _(){u()}return Object(d.jsxs)("article",{className:"card",children:[Object(d.jsx)("img",{src:t.link,alt:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f ".concat(t.name),className:"card__image",ref:p,onClick:function(){n(t)},onLoad:function(){p.current.naturalWidth<150&&(p.current.style.objectFit="none")}}),Object(d.jsxs)("div",{className:"card__button-container",children:[Object(d.jsx)("button",{className:"card__delete-button ".concat(O?"card__delete-button_visible":""),type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",onClick:function(){r(t)}}),Object(d.jsx)("button",{className:"card__edit-button ".concat(O?"card__edit-button_visible":""),type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",onClick:function(){o(t)}})]}),Object(d.jsxs)("div",{className:"card__description",children:[Object(d.jsx)("h2",{className:"card__caption",ref:b,onMouseEnter:function(e){var n=b.current;s(t,{left:n.offsetParent.offsetLeft+n.offsetLeft,top:n.offsetParent.offsetTop+n.offsetTop,right:document.documentElement.clientWidth-n.offsetParent.offsetLeft-n.offsetLeft,bottom:document.documentElement.clientHeight-n.offsetParent.offsetTop-n.offsetTop,width:n.offsetWidth,height:n.offsetHeight,clientY:e.clientY})},onMouseOut:_,children:t.name}),Object(d.jsxs)("div",{className:"card__like-container",children:[Object(d.jsx)("button",{className:"card__like-button ".concat(h?"card__like-button_active":""),type:"button","aria-label":"\u041b\u0430\u0439\u043a\u043d\u0443\u0442\u044c",onClick:function(){m[1](!1),c(t,m[1])},ref:j,onMouseEnter:function(e){var n=j.current;i(t,{left:n.offsetParent.offsetLeft+n.offsetLeft,top:n.offsetParent.offsetTop+n.offsetTop,right:document.documentElement.clientWidth-n.offsetParent.offsetLeft-n.offsetLeft,bottom:document.documentElement.clientHeight-n.offsetParent.offsetTop-n.offsetTop,width:n.offsetWidth,height:n.offsetHeight,clientY:e.clientY})},onMouseOut:_}),Object(d.jsx)("p",{className:"card__like-count",children:t.likes.length})]})]})]})},O=function(e){var t=e.onEditAvatar,n=e.onEditProfile,c=e.onAddCard,r=e.cards,o=e.onCardClick,s=e.onCardLike,i=e.onCardDelete,u=e.onEditCard,l=e.onHoverCardCaption,p=e.onHoverLikeCard,b=e.onOutHover,O=Object(a.useContext)(f);return Object(d.jsxs)("main",{children:[Object(d.jsxs)("section",{className:"profile",children:[Object(d.jsxs)("div",{className:"profile__avatar-container",children:[Object(d.jsx)("img",{className:"profile__avatar",src:O.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430"}),Object(d.jsx)("button",{className:"profile__edit-avatar-button",type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0443",onClick:t})]}),Object(d.jsx)("h1",{className:"profile__name",children:O.name}),Object(d.jsx)("button",{className:"profile__edit-button",type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onClick:n}),Object(d.jsx)("p",{className:"profile__specialization",children:O.about}),Object(d.jsx)("button",{className:"profile__add-button",type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e",onClick:c})]}),Object(d.jsx)("section",{className:"cards",children:r.map((function(e){return Object(d.jsx)(j,{card:e,onCardClick:o,onCardLike:s,onCardDelete:i,onEditCard:u,onHoverCardCaption:l,onHoverLikeCard:p,onOutHover:b},e._id)}))})]})},h=function(){return Object(d.jsx)("footer",{className:"footer",children:Object(d.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 \u041c\u0435\u0441\u0442\u043e \u0420\u043e\u0441\u0441\u0438\u044f"})})},m=function(e){var t=e.isOpen,n=e.onClose,c=e.name,r=e.children;var o=Object(a.useCallback)((function(e){"Escape"===e.key&&n()}),[n]);return Object(a.useEffect)((function(){if(t)return document.addEventListener("keydown",o),function(){document.removeEventListener("keydown",o)}}),[t,o]),Object(d.jsx)("div",{className:"popup popup_type_".concat(c," ").concat(t?"popup_opened":""),onMouseDown:function(e){e.target===e.currentTarget&&n()},children:r})},_=n.p+"static/media/arrowLeft.204d992b.svg",v=n.p+"static/media/arrowRight.b428b653.svg",x=function(e){var t=e.isOpen,n=e.onClose,c=e.currentCard,r=e.setCurrentCard,o=e.cards,s=Object(a.useCallback)((function(){var e=o.indexOf(c);r(e-1<0?o[o.length-1]:o[e-1])}),[o,c,r]),i=Object(a.useCallback)((function(){var e=o.indexOf(c);e+1>o.length-1?r(o[0]):r(o[e+1])}),[o,c,r]),u=Object(a.useCallback)((function(e){"ArrowRight"===e.key?i():"ArrowLeft"===e.key&&s()}),[i,s]);return Object(a.useEffect)((function(){if(t)return document.addEventListener("keydown",u),function(){document.removeEventListener("keydown",u)}}),[t,u]),Object(d.jsxs)(m,{isOpen:t,name:"view-card",onClose:n,children:[Object(d.jsx)("button",{className:"popup__previous-button",type:"button","aria-label":"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430",onClick:s,children:Object(d.jsx)("img",{src:_,alt:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430",className:"popup__previous-image"})}),Object(d.jsxs)("div",{className:"popup__photo-container",children:[Object(d.jsx)("img",{src:t?c.link:"",alt:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f ".concat(t?c.name:""),className:"popup__image"}),Object(d.jsx)("p",{className:"popup__photo-caption",children:t?c.name:""}),Object(d.jsx)("button",{className:"popup__close-button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:n})]}),Object(d.jsx)("button",{className:"popup__next-button",type:"button","aria-label":"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430",onClick:i,children:Object(d.jsx)("img",{src:v,alt:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0430",className:"popup__next-image"})})]})},C=function(){return Object(d.jsx)("div",{className:"popup__loader",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430"})},k=function(e){var t=e.isOpen,n=e.onClose,a=e.onSubmit,c=e.name,r=e.title,o=e.submitDescription,s=e.children,i=e.isSubmitDisabled;return Object(d.jsx)(m,{isOpen:t,name:c,onClose:n,children:Object(d.jsxs)("form",{action:"#",className:"popup__container",name:"form_".concat(c),onSubmit:a,noValidate:!0,children:[Object(d.jsx)("h2",{className:"popup__header",children:r}),Object(d.jsxs)("fieldset",{className:"popup__container-info",children:[s,Object(d.jsx)("button",{className:"popup__save-button ".concat(i?"popup__save-button_disabled":""),type:"submit","aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",disabled:i,children:o})]}),Object(d.jsx)("button",{className:"popup__close-button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:n})]})})},g=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateUser,r=e.onCheckValidation,o=Object(a.useState)(""),s=Object(p.a)(o,2),i=s[0],u=s[1],l=Object(a.useState)(""),b=Object(p.a)(l,2),j=b[0],O=b[1],h=Object(a.useState)(!0),m=Object(p.a)(h,2),_=m[0],v=m[1],x=Object(a.useState)(!0),C=Object(p.a)(x,2),g=C[0],y=C[1],N=Object(a.useState)(""),S=Object(p.a)(N,2),w=S[0],E=S[1],L=Object(a.useState)(""),D=Object(p.a)(L,2),P=D[0],A=D[1],H=Object(a.useState)(!1),T=Object(p.a)(H,2),U=T[0],R=T[1],M=Object(a.useState)(!1),V=Object(p.a)(M,2),Y=V[0],q=V[1],z=Object(a.useContext)(f);return Object(a.useEffect)((function(){u(z.name),O(z.about),v(!0),y(!0),E(""),A(""),q(!1)}),[z,t]),Object(a.useEffect)((function(){q(!(_&&g))}),[_,g]),Object(d.jsxs)(k,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"profile",isOpen:t,onClose:n,submitDescription:U?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),R(!0),q(!0),c({name:i,about:j}).finally((function(){R(!1),q(!1)}))},isSubmitDisabled:Y,children:[Object(d.jsx)("input",{value:i,type:"text",className:"popup__edit-field",id:"author-name",placeholder:"\u0410\u0432\u0442\u043e\u0440",name:"name",onChange:function(e){u(e.target.value),r(e.target,v,E)},minLength:"2",maxLength:"40",required:!0}),Object(d.jsx)("span",{id:"author-name-error",className:"popup__input-error ".concat(_?"":"popup__input-error_visible"),children:w}),Object(d.jsx)("input",{value:j,type:"text",className:"popup__edit-field",id:"author-specialization",placeholder:"\u041e \u0441\u0435\u0431\u0435",onChange:function(e){O(e.target.value),r(e.target,y,A)},name:"about",minLength:"2",maxLength:"200",required:!0}),Object(d.jsx)("span",{id:"author-specialization-error",className:"popup__input-error ".concat(g?"":"popup__input-error_visible"),children:P})]})},y=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateAvatar,r=e.onCheckValidation,o=Object(a.useState)(""),s=Object(p.a)(o,2),i=s[0],u=s[1],l=Object(a.useState)(!0),b=Object(p.a)(l,2),j=b[0],O=b[1],h=Object(a.useState)(""),m=Object(p.a)(h,2),_=m[0],v=m[1],x=Object(a.useState)(!1),C=Object(p.a)(x,2),g=C[0],y=C[1],N=Object(a.useState)(!1),S=Object(p.a)(N,2),w=S[0],E=S[1],L=Object(a.useContext)(f);return Object(a.useEffect)((function(){u(""),O(!1),v(""),E(!0)}),[L,t]),Object(a.useEffect)((function(){E(!j)}),[j]),Object(d.jsxs)(k,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"avatar",isOpen:t,onClose:n,submitDescription:g?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),y(!0),E(!0),c(i).finally((function(){y(!1),E(!1)}))},isSubmitDisabled:w,children:[Object(d.jsx)("input",{type:"url",value:i,className:"popup__edit-field",id:"avatar-link",name:"avatar",onChange:function(e){u(e.target.value),r(e.target,O,v)},placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(d.jsx)("span",{id:"avatar-link-error",className:"popup__input-error ".concat(j?"":"popup__input-error_visible"),children:_})]})},N=function(e){var t=e.isOpen,n=e.onClose,c=e.onSaveCard,r=e.onCheckValidation,o=e.card,s=Object(a.useState)(""),i=Object(p.a)(s,2),u=i[0],l=i[1],b=Object(a.useState)(""),f=Object(p.a)(b,2),j=f[0],O=f[1],h=Object(a.useState)(!1),m=Object(p.a)(h,2),_=m[0],v=m[1],x=Object(a.useState)(!1),C=Object(p.a)(x,2),g=C[0],y=C[1],N=Object(a.useState)(""),S=Object(p.a)(N,2),w=S[0],E=S[1],L=Object(a.useState)(""),D=Object(p.a)(L,2),P=D[0],A=D[1],H=Object(a.useState)(!1),T=Object(p.a)(H,2),U=T[0],R=T[1],M=Object(a.useState)(!0),V=Object(p.a)(M,2),Y=V[0],q=V[1];return Object(a.useEffect)((function(){o?(l(o.name),O(o.link),v(!0),y(!0),q(!1)):(l(""),O(""),v(!1),y(!1),q(!0)),E(""),A("")}),[t,o]),Object(a.useEffect)((function(){q(!(_&&g))}),[_,g]),Object(d.jsxs)(k,{title:o?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430":"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add-card",isOpen:t,onClose:n,submitDescription:U?o?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435...":o?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",onSubmit:function(e){e.preventDefault(),R(!0),q(!0),c(o,{name:u,link:j}).finally((function(){R(!1),q(!1)}))},isSubmitDisabled:Y,children:[Object(d.jsx)("input",{value:u,type:"text",className:"popup__edit-field",id:"place-name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"name",minLength:"2",maxLength:"30",required:!0,onChange:function(e){l(e.target.value),r(e.target,v,E)}}),Object(d.jsx)("span",{id:"place-name-error",className:"popup__input-error ".concat(_?"":"popup__input-error_visible"),children:w}),Object(d.jsx)("input",{value:j,type:"url",className:"popup__edit-field",id:"place-link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"link",required:!0,onChange:function(e){O(e.target.value),r(e.target,y,A)}}),Object(d.jsx)("span",{id:"place-link-error",className:"popup__input-error ".concat(g?"":"popup__input-error_visible"),children:P})]})},S=function(e){var t=e.isOpen,n=e.onClose,c=e.onDeleteCard,r=(e.onSetSubmitDisabled,e.card),o=Object(a.useState)(!1),s=Object(p.a)(o,2),i=s[0],u=s[1],l=Object(a.useState)(!1),b=Object(p.a)(l,2),f=b[0],j=b[1];return Object(d.jsx)(k,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"confirm-delete",isOpen:t,onClose:n,submitDescription:i?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...":"\u0414\u0430",onSubmit:function(e){e.preventDefault(),u(!0),j(!0),c(r).finally((function(){u(!1),j(!1)}))},isSubmitDisabled:f})},w=function(e){var t=e.isOpen,n=e.card,a=e.popupOutputArea;return Object(d.jsxs)("div",{className:"popup popup_type_view-author ".concat(t?"popup_opened":""),style:t?a.clientY<184?{left:a.left,top:a.top+a.height}:{left:a.left,bottom:a.bottom}:{},children:[Object(d.jsx)("img",{className:"popup__card-author-avatar",src:t?n.owner.avatar:"",alt:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430"}),Object(d.jsx)("p",{className:"popup__card-author-name",children:t?n.owner.name:""}),Object(d.jsx)("p",{className:"popup__card-author-about",children:t?n.owner.about:""})]})},E=["\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430","\u0447\u0435\u043b\u043e\u0432\u0435\u043a"];var L=function(e){var t=e.user;return Object(d.jsxs)("li",{className:"popup__like-user",children:[Object(d.jsx)("img",{className:"popup__like-user-avatar",src:t.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430"}),Object(d.jsx)("p",{className:"popup__like-user-name",children:t.name})]})},D=function(e){var t,n=e.isOpen,c=e.card,r=e.popupOutputArea,o=e.needUpdateViewLike,s=Object(a.useState)(!1);return Object(a.useEffect)((function(){s[1](o)}),[o,s]),Object(d.jsxs)("div",{className:"popup popup_type_view-likes ".concat(n?"popup_opened":""),style:function(){if(!n)return{};var e=45*c.likes.length;return r.clientY<e?{right:r.right,top:r.top+r.height}:{right:r.right,bottom:r.bottom}}(),children:[Object(d.jsx)("h2",{className:"popup__header popup__header_size_small",children:"\u041e\u0446\u0435\u043d\u0438\u043b\u0438:  ".concat(n?c.likes.length:0," ").concat(n?(t=c.likes.length,t%10===1&&t%100!==11?E[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?E[1]:E[2]):"\u0447\u0435\u043b\u043e\u0432\u0435\u043a",":")}),Object(d.jsx)("ul",{className:"popup__like-users",children:n?c.likes.map((function(e){return Object(d.jsx)(L,{user:e},e._id)})):""})]})},P=n.p+"static/media/errorIcon.be98943b.svg",A=function(e){var t=e.isOpen,n=e.errorMessage,c=e.onClose,r=Object(a.useCallback)((function(e){e.target.classList.contains("error-identification")||c()}),[c]),o=Object(a.useCallback)((function(e){"Escape"===e.key&&c()}),[c]);return Object(a.useEffect)((function(){if(t)return document.addEventListener("keydown",o),document.addEventListener("mousedown",r),function(){document.removeEventListener("keydown",o),document.removeEventListener("mousedown",r)}}),[t,o,r]),Object(d.jsx)("div",{className:"popup popup_type_error ".concat(t?"popup_opened":""),children:Object(d.jsxs)("div",{className:"popup__error-container error-identification",onMouseDown:r,children:[Object(d.jsxs)("div",{className:"popup__error error-identification",children:[Object(d.jsx)("img",{className:"popup__error-icon error-identification",src:P,alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 \u043e\u0448\u0438\u0431\u043a\u0438"}),Object(d.jsx)("h2",{className:"popup__error-header error-identification",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443:"})]}),Object(d.jsx)("p",{className:"popup__error-caption error-identification",children:"".concat(n.status," ").concat(n.message," url=").concat(n.url)})]})})},H=n(9),T=n(10),U=new(function(){function e(t){Object(H.a)(this,e),this._url=t.url,this._headers=t.headers}return Object(T.a)(e,[{key:"_processingResult",value:function(e){return e.ok?e.json():Promise.reject({status:e.status,message:e.statusText,url:e.url})}},{key:"getUserProperties",value:function(){var e=this;return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then((function(t){return e._processingResult(t)}))}},{key:"updateUserAvatar",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return t._processingResult(e)}))}},{key:"updateUserProperties",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._processingResult(e)}))}},{key:"getAllCards",value:function(){var e=this;return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then((function(t){return e._processingResult(t)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return t._processingResult(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._processingResult(e)}))}},{key:"setLikeCard",value:function(e,t){var n=this,a=e?"DELETE":"PUT";return fetch("".concat(this._url,"/cards/likes/").concat(t),{method:a,headers:this._headers}).then((function(e){return n._processingResult(e)}))}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-27",headers:{authorization:"7da0d743-b2f7-439b-8a75-4db6d3ee0226","Content-Type":"application/json"}});var R=function(){var e=Object(a.useState)(!0),t=Object(p.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),o=Object(p.a)(r,2),i=o[0],j=o[1],m=Object(a.useState)(null),_=Object(p.a)(m,2),v=_[0],k=_[1],E=Object(a.useState)(!1),L=Object(p.a)(E,2),P=L[0],H=L[1],T=Object(a.useState)(!1),R=Object(p.a)(T,2),M=R[0],V=R[1],Y=Object(a.useState)(!1),q=Object(p.a)(Y,2),z=q[0],J=q[1],W=Object(a.useState)(!1),I=Object(p.a)(W,2),B=I[0],F=I[1],G=Object(a.useState)(!1),K=Object(p.a)(G,2),Q=K[0],X=K[1],Z=Object(a.useState)(null),$=Object(p.a)(Z,2),ee=$[0],te=$[1],ne=Object(a.useState)(!1),ae=Object(p.a)(ne,2),ce=ae[0],re=ae[1],oe=Object(a.useState)(!1),se=Object(p.a)(oe,2),ie=se[0],ue=se[1],le=Object(a.useState)(!1),pe=Object(p.a)(le,2),de=pe[0],be=pe[1],fe=Object(a.useState)({left:0,top:0,right:0,bottom:0,width:0,height:0,clientY:0}),je=Object(p.a)(fe,2),Oe=je[0],he=je[1],me=Object(a.useState)(!1),_e=Object(p.a)(me,2),ve=_e[0],xe=_e[1],Ce=Object(a.useState)({status:null,message:null,url:null}),ke=Object(p.a)(Ce,2),ge=ke[0],ye=ke[1];function Ne(e){ye(e),xe(!0),console.log(e)}function Se(){return(Se=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.updateUserProperties(t);case 3:n=e.sent,k(n),Re(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Ne(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function we(){return(we=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.updateUserAvatar(t);case 3:n=e.sent,k(n),Re(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Ne(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Ee(e,t,n){t?e.likes=e.likes.filter((function(e){return e._id!==v._id})):e.likes.push(v),n(!0),be(!0)}function Le(){return(Le=Object(l.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.likes.some((function(e){return e._id===v._id})),Ee(t,a,n),e.prev=2,e.next=5,U.setLikeCard(a,t._id);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),Ne(e.t0),Ee(t,!a,n);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}function De(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.addCard(t);case 2:n=e.sent,j([n].concat(Object(s.a)(i)));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,t){return He.apply(this,arguments)}function He(){return He=Object(l.a)(u.a.mark((function e(t,n){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.deleteCard(t._id);case 2:return e.next=4,U.addCard(n);case 4:a=e.sent,j((function(e){return e.map((function(e){return e._id===t._id?a:e}))}));case 6:case"end":return e.stop()}}),e)}))),He.apply(this,arguments)}function Te(){return(Te=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=6;break}return e.next=4,De(n);case 4:e.next=8;break;case 6:return e.next=8,Ae(t,n);case 8:Re(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Ne(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function Ue(){return Ue=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.deleteCard(t._id);case 3:j((function(e){return e.filter((function(e){return e._id!==t._id}))})),Re(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Ne(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Ue.apply(this,arguments)}function Re(){H(!1),V(!1),J(!1),F(!1),X(!1),re(!1),ue(!1),be(!1),te(null)}function Me(e,t,n){e.validity.valid?t(!0):(t(!1),n(e.validationMessage))}return Object(a.useEffect)((function(){U.getUserProperties().then((function(e){k(e)})).catch((function(e){Ne(e)})).finally((function(){c(!1)}))}),[]),Object(a.useEffect)((function(){U.getAllCards().then((function(e){j(e)})).catch((function(e){Ne(e)}))}),[]),n?Object(d.jsx)(C,{}):Object(d.jsx)(f.Provider,{value:v,children:Object(d.jsxs)("div",{className:"page__container",children:[Object(d.jsx)(b,{}),Object(d.jsx)(O,{cards:i,card:ee,onEditAvatar:function(){H(!0)},onEditProfile:function(){V(!0)},onAddCard:function(){J(!0)},onClose:Re,onCardClick:function(e){te(e),X(!0)},onCardLike:function(e,t){return Le.apply(this,arguments)},onCardDelete:function(e){te(e),F(!0)},onEditCard:function(e){te(e),J(!0)},onHoverCardCaption:function(e,t){te(e),he(t),re(!0)},onHoverLikeCard:function(e,t){te(e),he(t),ue(!0)},onOutHover:function(){Re()}}),Object(d.jsx)(y,{isOpen:P,onClose:Re,onUpdateAvatar:function(e){return we.apply(this,arguments)},onCheckValidation:Me}),Object(d.jsx)(g,{isOpen:M,onClose:Re,onUpdateUser:function(e){return Se.apply(this,arguments)},onCheckValidation:Me}),Object(d.jsx)(N,{isOpen:z,onClose:Re,onSaveCard:function(e,t){return Te.apply(this,arguments)},onCheckValidation:Me,card:ee}),Object(d.jsx)(S,{card:ee,isOpen:B,onClose:Re,onDeleteCard:function(e){return Ue.apply(this,arguments)}}),Object(d.jsx)(x,{currentCard:ee,setCurrentCard:te,cards:i,isOpen:Q,onClose:Re}),Object(d.jsx)(w,{card:ee,popupOutputArea:Oe,isOpen:ce}),Object(d.jsx)(D,{card:ee,popupOutputArea:Oe,isOpen:ie,needUpdateViewLike:de}),Object(d.jsx)(A,{isOpen:ve,errorMessage:ge,onClose:function(){xe(!1)}}),Object(d.jsx)(h,{})]})})};o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(R,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.0c2bebdb.chunk.js.map