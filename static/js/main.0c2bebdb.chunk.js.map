{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/Popup.js","images/arrowLeft.svg","images/arrowRight.svg","components/ImagePopup.js","components/Spinner.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmDeletePopup.js","components/ViewAuthorPopup.js","utils/utils.js","components/LikeUser.js","components/ViewLikePopup.js","images/errorIcon.svg","components/ErrorPopup.js","utils/Api.js","components/App.js","index.js"],"names":["Header","className","href","target","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","onEditCard","onHoverCardCaption","onHoverLikeCard","onOutHover","currentUser","useContext","imageRef","useRef","captionRef","likeRef","isOwn","owner","_id","isLiked","likes","some","i","needUpdateCard","useState","handleHideInfo","src","link","alt","name","ref","onClick","onLoad","current","naturalWidth","style","objectFit","type","onMouseEnter","e","element","left","offsetParent","offsetLeft","top","offsetTop","right","document","documentElement","clientWidth","bottom","clientHeight","width","offsetWidth","height","offsetHeight","clientY","onMouseOut","length","Main","onEditAvatar","onEditProfile","onAddCard","cards","avatar","about","map","item","Footer","Popup","isOpen","onClose","children","handleCloseByEsc","useCallback","key","useEffect","addEventListener","removeEventListener","onMouseDown","currentTarget","ImagePopup","currentCard","setCurrentCard","handlePreviousCard","currentIndex","indexOf","handleNextCard","handlePressButtonKeyboard","previousButtonIcon","nextButtonIcon","Spinner","PopupWithForm","onSubmit","title","submitDescription","isSubmitDisabled","action","noValidate","disabled","EditProfilePopup","onUpdateUser","onCheckValidation","setName","setAbout","isNameValid","setIsNameValid","isAboutValid","setIsAboutValid","errorMessageName","setErrorMessageName","errorMessageAbout","setErrorMessageAbout","isLoading","setIsLoading","setIsSubmitDisabled","preventDefault","finally","value","id","placeholder","onChange","minLength","maxLength","required","EditAvatarPopup","onUpdateAvatar","setAvatar","isAvatarValid","setIsAvatarValid","errorMessageAvatar","setErrorMessageAvatar","AddPlacePopup","onSaveCard","setLink","isLinkValid","setIsLinkValid","errorMessageLink","setErrorMessageLink","ConfirmDeletePopup","onDeleteCard","onSetSubmitDisabled","ViewAuthorPopup","popupOutputArea","arrText","LikeUser","user","ViewLikePopup","num","needUpdateViewLike","needUpdateView","approximateHeight","setPosition","ErrorPopup","errorMessage","handleCloseByOverlay","classList","contains","errorIcon","status","message","url","apiServer","property","this","_url","_headers","headers","result","ok","json","Promise","reject","statusText","fetch","then","_processingResult","linkAvatar","method","body","JSON","stringify","data","idCard","metodHtml","authorization","App","setCards","setCurrentUser","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddCardPopupOpen","setIsAddCardPopupOpen","isConfirmDeletePopupOpen","setIsConfirmDeletePopupOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","isViewAuthorPopupOpen","setIsViewAuthorPopupOpen","isViewLikePopupOpen","setIsViewLikePopupOpen","setNeedUpdateViewLike","setPopupOutputArea","isErrorPopupOpen","setIsErrorPopupOpen","setErrorMessage","showError","err","console","log","a","updateUserProperties","updateData","handleCloseAllPopups","updateUserAvatar","toggleLikeCard","setUpdateCard","filter","push","setLikeCard","handleAddCard","addCard","newCard","handleSaveCard","deleteCard","c","checkInputValidation","input","setValid","validity","valid","validationMessage","getUserProperties","userData","catch","getAllCards","cardsData","Provider","area","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0c2bebdb.chunk.js","sourcesContent":["import React from 'react';\n\nconst Header = () => {\n  return (\n    <header className=\"header\">\n      {/*eslint-disable-next-line*/}\n      <a href=\"#\" className=\"header__logo\" aria-label=\"Логотип\" target=\"_blank\"/>\n    </header>\n  );\n};\n\nexport default Header;\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React, { useContext, useRef, useState } from 'react';\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nconst Card = ({ card, onCardClick, onCardLike, onCardDelete, onEditCard, onHoverCardCaption, onHoverLikeCard, onOutHover }) => {\n  const currentUser = useContext(CurrentUserContext);\n  const imageRef = useRef();\n  const captionRef = useRef();\n  const likeRef = useRef();\n  const isOwn = card.owner._id === currentUser._id;\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\n  const needUpdateCard = useState(false);\n\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleLikeClick() {\n    needUpdateCard[1](false); //обнулим флаг обновления\n    onCardLike(card, needUpdateCard[1]);\n  }\n\n  function handleDeleteClick() {\n    onCardDelete(card);\n  }\n\n  function handleEditClick() {\n    onEditCard(card);\n  }\n\n  function handleSetupImageProperties() {\n    if (imageRef.current.naturalWidth < 150) {\n      imageRef.current.style.objectFit = 'none';\n    }\n  }\n\n  function handleShowAuthorInfo(e) {\n    const element = captionRef.current;\n    onHoverCardCaption(card,\n      {\n        left: element.offsetParent.offsetLeft + element.offsetLeft,\n        top: element.offsetParent.offsetTop + element.offsetTop,\n        right: document.documentElement.clientWidth - element.offsetParent.offsetLeft - element.offsetLeft,\n        bottom: document.documentElement.clientHeight - element.offsetParent.offsetTop - element.offsetTop,\n        width: element.offsetWidth,\n        height: element.offsetHeight,\n        clientY: e.clientY,\n      });\n  }\n\n  function handleShowLikeInfo(e) {\n    const element = likeRef.current;\n    onHoverLikeCard(card,\n      {\n        left: element.offsetParent.offsetLeft + element.offsetLeft,\n        top: element.offsetParent.offsetTop + element.offsetTop,\n        right: document.documentElement.clientWidth - element.offsetParent.offsetLeft - element.offsetLeft,\n        bottom: document.documentElement.clientHeight - element.offsetParent.offsetTop - element.offsetTop,\n        width: element.offsetWidth,\n        height: element.offsetHeight,\n        clientY: e.clientY\n      });\n  }\n\n  function handleHideInfo() {\n    onOutHover();\n  }\n\n  return (\n    <article className=\"card\">\n      <img src={card.link} alt={`Фотография ${card.name}`} className=\"card__image\" ref={imageRef}\n        onClick={handleClick} onLoad={handleSetupImageProperties} />\n      <div className=\"card__button-container\">\n        <button\n          className={`card__delete-button ${isOwn ? 'card__delete-button_visible' : ''}`}\n          type=\"button\" aria-label=\"Удалить карточку\" onClick={handleDeleteClick} />\n        <button\n          className={`card__edit-button ${isOwn ? 'card__edit-button_visible' : ''}`}\n          type=\"button\" aria-label=\"Редактировать карточку\" onClick={handleEditClick} />\n      </div>\n      <div className=\"card__description\">\n        <h2 className=\"card__caption\" ref={captionRef} onMouseEnter={handleShowAuthorInfo}\n          onMouseOut={handleHideInfo}>{card.name}</h2>\n        <div className=\"card__like-container\">\n          <button className={`card__like-button ${isLiked ? 'card__like-button_active' : ''}`} type=\"button\"\n            aria-label=\"Лайкнуть\" onClick={handleLikeClick}\n            ref={likeRef} onMouseEnter={handleShowLikeInfo} onMouseOut={handleHideInfo} />\n          <p className=\"card__like-count\">{card.likes.length}</p>\n        </div>\n      </div>\n    </article>\n  );\n};\n\nexport default Card;\n","import React, {useContext} from 'react';\nimport Card from \"./Card\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nconst Main = ({\n                onEditAvatar,\n                onEditProfile,\n                onAddCard,\n                cards,\n                onCardClick,\n                onCardLike,\n                onCardDelete,\n                onEditCard,\n                onHoverCardCaption,\n                onHoverLikeCard,\n                onOutHover\n              }) => {\n  const currentUser = useContext(CurrentUserContext);\n\n  return (\n    <main>\n      <section className=\"profile\">\n        <div className=\"profile__avatar-container\">\n          <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Аватарка\"/>\n          <button className=\"profile__edit-avatar-button\" type=\"button\" aria-label=\"Редактировать аватарку\"\n                  onClick={onEditAvatar}/>\n        </div>\n        <h1 className=\"profile__name\">{currentUser.name}</h1>\n        <button className=\"profile__edit-button\" type=\"button\" aria-label=\"Редактировать профиль\"\n                onClick={onEditProfile}/>\n        <p className=\"profile__specialization\">{currentUser.about}</p>\n        <button className=\"profile__add-button\" type=\"button\" aria-label=\"Добавить фото\" onClick={onAddCard}/>\n      </section>\n      <section className=\"cards\">\n        {cards.map(item => {\n          return (\n            <Card key={item._id} card={item} onCardClick={onCardClick} onCardLike={onCardLike}\n                  onCardDelete={onCardDelete} onEditCard={onEditCard} onHoverCardCaption={onHoverCardCaption} onHoverLikeCard={onHoverLikeCard}\n                  onOutHover={onOutHover}/>\n          )\n        })\n        }\n      </section>\n    </main>\n  );\n};\n\nexport default Main;\n","import React from 'react';\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; 2021 Место Россия</p>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React, {useEffect, useCallback} from 'react';\n\nconst Popup = ({isOpen, onClose, name, children}) => {\n\n  function handleCloseByOverlay(e) {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  }\n\n  const handleCloseByEsc = useCallback(\n    (e) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    }, [onClose]);\n\n  useEffect(() => {\n    if (isOpen) {\n      document.addEventListener('keydown', handleCloseByEsc);\n      return () => {\n        document.removeEventListener('keydown', handleCloseByEsc);\n      };\n    }\n  }, [isOpen, handleCloseByEsc]);\n\n  return (\n    <div className={`popup popup_type_${name} ${isOpen ? 'popup_opened' : ''}`} onMouseDown={handleCloseByOverlay}>\n      {children}\n    </div>\n  );\n};\n\nexport default Popup;\n\n","export default __webpack_public_path__ + \"static/media/arrowLeft.204d992b.svg\";","export default __webpack_public_path__ + \"static/media/arrowRight.b428b653.svg\";","import Popup from \"./Popup\";\nimport previousButtonIcon from \"../images/arrowLeft.svg\";\nimport nextButtonIcon from \"../images/arrowRight.svg\";\nimport React, {useCallback, useEffect} from \"react\";\n\nconst ImagePopup = ({isOpen, onClose, currentCard, setCurrentCard, cards}) => {\n\n  const handlePreviousCard = useCallback(() => {\n    const currentIndex = cards.indexOf(currentCard);\n    if (currentIndex - 1 < 0) {\n      setCurrentCard(cards[cards.length - 1]);\n    } else {\n      setCurrentCard(cards[currentIndex - 1]);\n    }\n  },[cards, currentCard, setCurrentCard]);\n\n  const handleNextCard = useCallback(() => {\n    const currentIndex = cards.indexOf(currentCard);\n    if (currentIndex + 1 > cards.length - 1) {\n      setCurrentCard(cards[0]);\n    } else {\n      setCurrentCard(cards[currentIndex + 1]);\n    }\n  },[cards, currentCard, setCurrentCard]);\n\n  const handlePressButtonKeyboard = useCallback(\n    (e) => {\n      if (e.key === 'ArrowRight') {\n        handleNextCard();\n      } else if (e.key === 'ArrowLeft') {\n        handlePreviousCard();\n      }\n    }, [handleNextCard, handlePreviousCard]);\n\n  useEffect(() => {\n    if (isOpen) {\n      document.addEventListener('keydown', handlePressButtonKeyboard);\n      return () => {\n        document.removeEventListener('keydown', handlePressButtonKeyboard);\n      };\n    }\n  }, [isOpen, handlePressButtonKeyboard]);\n\n  return (\n    <Popup isOpen={isOpen} name=\"view-card\" onClose={onClose}>\n      <button className=\"popup__previous-button\" type=\"button\" aria-label=\"Предыдущая карточка\" onClick={handlePreviousCard}>\n        <img src={previousButtonIcon} alt=\"Предыдущая карточка\" className=\"popup__previous-image\"/>\n      </button>\n      <div className=\"popup__photo-container\">\n        <img src={isOpen ? currentCard.link : ''} alt={`Фотография ${isOpen ? currentCard.name : ''}`} className=\"popup__image\"/>\n        <p className=\"popup__photo-caption\">{isOpen ? currentCard.name : ''}</p>\n        <button className=\"popup__close-button\" type=\"button\" aria-label=\"Закрыть\" onClick={onClose}/>\n      </div>\n      <button className=\"popup__next-button\" type=\"button\" aria-label=\"Следующая карточка\" onClick={handleNextCard}>\n        <img src={nextButtonIcon} alt=\"Следующая карточка\" className=\"popup__next-image\"/>\n      </button>\n    </Popup>\n  );\n};\n\nexport default ImagePopup;\n","import React from 'react';\r\n\r\nconst Spinner = () => {\r\n  return (\r\n    <div className=\"popup__loader\">Загрузка</div>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n","import React from 'react';\n\nimport Popup from \"./Popup\";\n\nconst PopupWithForm = ({isOpen, onClose, onSubmit, name, title, submitDescription, children, isSubmitDisabled}) => {\n  return (\n    <Popup isOpen={isOpen} name={name} onClose={onClose}>\n      <form action=\"#\" className=\"popup__container\" name={`form_${name}`} onSubmit={onSubmit} noValidate>\n        <h2 className=\"popup__header\">{title}</h2>\n        <fieldset className=\"popup__container-info\">\n          {children}\n          <button className={`popup__save-button ${isSubmitDisabled ? 'popup__save-button_disabled' : ''}`}\n                  type=\"submit\" aria-label=\"Сохранить изменения\"\n                  disabled={isSubmitDisabled}\n          >{submitDescription}</button>\n        </fieldset>\n        <button className=\"popup__close-button\" type=\"button\" aria-label=\"Закрыть\" onClick={onClose}/>\n      </form>\n    </Popup>\n  );\n};\n\nexport default PopupWithForm;\n\n","import React, {useContext, useState, useEffect} from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nconst EditProfilePopup = ({isOpen, onClose, onUpdateUser, onCheckValidation}) => {\n  const [name, setName] = useState('');\n  const [about, setAbout] = useState('');\n  const [isNameValid, setIsNameValid] = useState(true);\n  const [isAboutValid, setIsAboutValid] = useState(true);\n  const [errorMessageName, setErrorMessageName] = useState('');\n  const [errorMessageAbout, setErrorMessageAbout] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSubmitDisabled, setIsSubmitDisabled] = useState(false);\n  const currentUser = useContext(CurrentUserContext);\n\n  useEffect(() => {\n    setName(currentUser.name);\n    setAbout(currentUser.about);\n    setIsNameValid(true);\n    setIsAboutValid(true);\n    setErrorMessageName('');\n    setErrorMessageAbout('');\n    setIsSubmitDisabled(false);\n  }, [currentUser, isOpen]);\n\n  useEffect(() => {\n    setIsSubmitDisabled(!(isNameValid && isAboutValid));\n  }, [isNameValid, isAboutValid]);\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n    onCheckValidation(e.target, setIsNameValid, setErrorMessageName);\n  }\n\n\n  function handleAboutChange(e) {\n    setAbout(e.target.value);\n    onCheckValidation(e.target, setIsAboutValid, setErrorMessageAbout);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setIsLoading(true);\n    setIsSubmitDisabled(true);\n    onUpdateUser({name, about})\n      .finally(() => {\n        setIsLoading(false);\n        setIsSubmitDisabled(false);\n      });\n  }\n\n  return (\n    <PopupWithForm title=\"Редактировать профиль\" name=\"profile\" isOpen={isOpen}\n                   onClose={onClose} submitDescription={isLoading ? 'Сохранение...' : 'Сохранить'}\n                   onSubmit={handleSubmit} isSubmitDisabled={isSubmitDisabled}>\n      <input value={name} type=\"text\" className=\"popup__edit-field\" id=\"author-name\" placeholder=\"Автор\" name=\"name\"\n             onChange={handleNameChange}\n             minLength=\"2\"\n             maxLength=\"40\" required/>\n      <span id=\"author-name-error\"\n            className={`popup__input-error ${!isNameValid ? 'popup__input-error_visible' : ''}`}>{errorMessageName}</span>\n      <input value={about} type=\"text\" className=\"popup__edit-field\" id=\"author-specialization\" placeholder=\"О себе\"\n             onChange={handleAboutChange}\n             name=\"about\"\n             minLength=\"2\" maxLength=\"200\" required/>\n      <span id=\"author-specialization-error\"\n            className={`popup__input-error ${!isAboutValid ? 'popup__input-error_visible' : ''}`}>{errorMessageAbout}</span>\n    </PopupWithForm>\n  );\n};\n\nexport default EditProfilePopup;\n","import React, {useContext, useEffect, useState} from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nconst EditAvatarPopup = ({isOpen, onClose, onUpdateAvatar, onCheckValidation}) => {\n  const [avatar, setAvatar] = useState('');\n  const [isAvatarValid, setIsAvatarValid] = useState(true);\n  const [errorMessageAvatar, setErrorMessageAvatar] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSubmitDisabled, setIsSubmitDisabled] = useState(false);\n  const currentUser = useContext(CurrentUserContext);\n\n  useEffect(() => {\n\n    // setAvatar(currentUser.avatar);\n    // setIsAvatarValid(true);\n    // setErrorMessageAvatar('');\n    // setIsSubmitDisabled(false);\n\n    //Ну не совсем - руками отредактировать строчку то можно - это просто текст по сути,\n    //кроме того, удобнее тестировать.\n\n    setAvatar('');\n    setIsAvatarValid(false);\n    setErrorMessageAvatar('');\n    setIsSubmitDisabled(true);\n\n  }, [currentUser, isOpen]);\n\n  useEffect(() => {\n    setIsSubmitDisabled(!isAvatarValid);\n  }, [isAvatarValid]);\n\n  function handleAvatarChange(e) {\n    setAvatar(e.target.value);\n    onCheckValidation(e.target, setIsAvatarValid, setErrorMessageAvatar);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setIsLoading(true);\n    setIsSubmitDisabled(true);\n    onUpdateAvatar(avatar)\n      .finally(() => {\n        setIsLoading(false);\n        setIsSubmitDisabled(false);\n      });\n  }\n\n  return (\n    <PopupWithForm title=\"Обновить аватар\" name=\"avatar\" isOpen={isOpen}\n                   onClose={onClose} submitDescription={isLoading ? 'Сохранение...' : 'Сохранить'}\n                   onSubmit={handleSubmit} isSubmitDisabled={isSubmitDisabled}>\n      <input type=\"url\" value={avatar} className=\"popup__edit-field\" id=\"avatar-link\" name=\"avatar\"\n             onChange={handleAvatarChange}\n             placeholder=\"Ссылка на картинку\"\n             required/>\n      <span id=\"avatar-link-error\"\n            className={`popup__input-error ${!isAvatarValid ? 'popup__input-error_visible' : ''}`}>{errorMessageAvatar}</span>\n    </PopupWithForm>\n  );\n};\n\nexport default EditAvatarPopup;\n","import React, {useEffect, useState} from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\n\nconst AddPlacePopup = ({isOpen, onClose, onSaveCard, onCheckValidation, card}) => {\n  const [name, setName] = useState('');\n  const [link, setLink] = useState('');\n  const [isNameValid, setIsNameValid] = useState(false);\n  const [isLinkValid, setIsLinkValid] = useState(false);\n  const [errorMessageName, setErrorMessageName] = useState('');\n  const [errorMessageLink, setErrorMessageLink] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSubmitDisabled, setIsSubmitDisabled] = useState(true);\n\n  useEffect(() => {\n    if (!card) {\n      setName('');\n      setLink('');\n      setIsNameValid(false);\n      setIsLinkValid(false);\n      setIsSubmitDisabled(true);\n    } else {\n      setName(card.name);\n      setLink(card.link);\n      setIsNameValid(true);\n      setIsLinkValid(true);\n      setIsSubmitDisabled(false);\n    }\n    setErrorMessageName('');\n    setErrorMessageLink('');\n  }, [isOpen, card]);\n\n  useEffect(() => {\n    setIsSubmitDisabled(!(isNameValid && isLinkValid));\n  }, [isNameValid, isLinkValid]);\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n    onCheckValidation(e.target, setIsNameValid, setErrorMessageName);\n  }\n\n  function handleLinkChange(e) {\n    setLink(e.target.value);\n    onCheckValidation(e.target, setIsLinkValid, setErrorMessageLink);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setIsLoading(true);\n    setIsSubmitDisabled(true);\n    onSaveCard(card, {name, link})\n      .finally(() => {\n        setIsLoading(false);\n        setIsSubmitDisabled(false);\n      });\n  }\n\n  return (\n    <PopupWithForm title={!card ? 'Новое место' : 'Редактирование места'} name=\"add-card\" isOpen={isOpen}\n                   onClose={onClose}\n                   submitDescription={isLoading ? !card ? 'Добавление...' : 'Сохранение...' : !card ? 'Добавить' : 'Сохранить'}\n                   onSubmit={handleSubmit}\n                   isSubmitDisabled={isSubmitDisabled}>\n      <input value={name} type=\"text\" className=\"popup__edit-field\" id=\"place-name\" placeholder=\"Название\" name=\"name\"\n             minLength=\"2\" maxLength=\"30\" required onChange={handleNameChange}/>\n      <span id=\"place-name-error\"\n            className={`popup__input-error ${!isNameValid ? 'popup__input-error_visible' : ''}`}>{errorMessageName}</span>\n      <input value={link} type=\"url\" className=\"popup__edit-field\" id=\"place-link\" placeholder=\"Ссылка на картинку\"\n             name=\"link\"\n             required onChange={handleLinkChange}/>\n      <span id=\"place-link-error\"\n            className={`popup__input-error ${!isLinkValid ? 'popup__input-error_visible' : ''}`}>{errorMessageLink}</span>\n    </PopupWithForm>\n  );\n};\n\nexport default AddPlacePopup;\n","import React, {useState} from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\n\nconst ConfirmDeletePopup = ({isOpen, onClose, onDeleteCard, onSetSubmitDisabled, card}) => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSubmitDisabled, setIsSubmitDisabled] = useState(false);\n\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setIsLoading(true);\n    setIsSubmitDisabled(true);\n    onDeleteCard(card)\n      .finally(() => {\n        setIsLoading(false);\n        setIsSubmitDisabled(false);\n      });\n  }\n\n  return (\n    <PopupWithForm title=\"Вы уверены?\" name=\"confirm-delete\" isOpen={isOpen}\n                   onClose={onClose} submitDescription={isLoading ? 'Удаление...' : 'Да'}\n                   onSubmit={handleSubmit} isSubmitDisabled={isSubmitDisabled}/>\n  );\n};\n\nexport default ConfirmDeletePopup;\n","import React from 'react';\n\nconst MIN_HEIGHT_POPUP = 184;\nconst ViewAuthorPopup = ({isOpen, card, popupOutputArea}) => {\n  function setPosition() {\n    if (!isOpen) {\n      return {};\n    }\n    //Костыльный расчет приблизительной высоты так как размер дива измениться после подстановки значений\n    if (popupOutputArea.clientY < MIN_HEIGHT_POPUP) {\n      //места для вывода окошка не хватает - выводим вниз\n      return {left: popupOutputArea.left, top: popupOutputArea.top + popupOutputArea.height};\n    }\n    return {left: popupOutputArea.left, bottom: popupOutputArea.bottom};\n  }\n\n  return (\n    <div className={`popup popup_type_view-author ${isOpen ? 'popup_opened' : ''}`} style={setPosition()}>\n      <img className=\"popup__card-author-avatar\" src={isOpen ? card.owner.avatar : ''} alt=\"Аватарка\"/>\n      <p className=\"popup__card-author-name\">{isOpen ? card.owner.name : ''}</p>\n      <p className=\"popup__card-author-about\">{isOpen ? card.owner.about : ''}</p>\n    </div>\n  );\n};\n\nexport default ViewAuthorPopup;\n\n","const arrText = [\"человек\", \"человека\", \"человек\"];\r\n\r\nexport function formattingUserCount(num) {\r\n  if (num % 10 === 1 && num % 100 !== 11) {\r\n    return arrText[0];\r\n  } else if (\r\n    num % 10 >= 2 &&\r\n    num % 10 <= 4 &&\r\n    (num % 100 < 10 || num % 100 >= 20)\r\n  ) {\r\n    return arrText[1];\r\n  }\r\n  return arrText[2];\r\n}\r\n","import React from 'react';\r\n\r\nconst LikeUser = ({user}) => {\r\n  return (\r\n    <li className=\"popup__like-user\">\r\n      <img className=\"popup__like-user-avatar\" src={user.avatar} alt=\"Аватарка\"/>\r\n      <p className=\"popup__like-user-name\">{user.name}</p>\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default LikeUser;\r\n","import React, {useEffect, useState} from 'react';\nimport {formattingUserCount} from \"../utils/utils\";\nimport LikeUser from \"./LikeUser\";\n\nconst MIN_HEIGHT_POPUP = 45;\n\nconst ViewLikePopup = ({isOpen, card, popupOutputArea, needUpdateViewLike}) => {\n  const needUpdateView = useState(false);\n\n  useEffect(() => {\n    needUpdateView[1](needUpdateViewLike);\n  }, [needUpdateViewLike, needUpdateView]);\n\n  function setPosition() {\n    if (!isOpen) {\n      return {};\n    }\n    //На момент вывода окошка не знаем истинную высоту, поэтому делаем костыльный расчет приблизительной высоты\n    const approximateHeight = MIN_HEIGHT_POPUP * card.likes.length;\n    if (popupOutputArea.clientY < approximateHeight) {\n      //места для вывода окошка не хватает - выводим вниз\n      return {right: popupOutputArea.right, top: popupOutputArea.top + popupOutputArea.height};\n    }\n    return {right: popupOutputArea.right, bottom: popupOutputArea.bottom};\n  }\n\n  return (\n    <div className={`popup popup_type_view-likes ${isOpen ? 'popup_opened' : ''}`} style={setPosition()}>\n      <h2\n        className=\"popup__header popup__header_size_small\">\n        {`Оценили:  ${isOpen ? card.likes.length : 0} ${isOpen ? formattingUserCount(card.likes.length) : 'человек'}:`}\n      </h2>\n      <ul className=\"popup__like-users\">\n        {isOpen ? card.likes.map(user => {\n          return (<LikeUser key={user._id} user={user}/>)\n        }) : ''}\n      </ul>\n    </div>\n  );\n};\n\nexport default ViewLikePopup;\n\n","export default __webpack_public_path__ + \"static/media/errorIcon.be98943b.svg\";","import React, {useCallback, useEffect} from 'react';\r\nimport errorIcon from \"../images/errorIcon.svg\";\r\n\r\nconst ErrorPopup = ({isOpen, errorMessage, onClose}) => {\r\n\r\n  const handleCloseByOverlay = useCallback(\r\n    (e) => {\r\n      if (!e.target.classList.contains('error-identification')) {\r\n        onClose();\r\n      }\r\n    }, [onClose]);\r\n\r\n  const handleCloseByEsc = useCallback(\r\n    (e) => {\r\n      if (e.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    }, [onClose]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleCloseByEsc);\r\n      document.addEventListener('mousedown', handleCloseByOverlay);\r\n      return () => {\r\n        document.removeEventListener('keydown', handleCloseByEsc);\r\n        document.removeEventListener('mousedown', handleCloseByOverlay);\r\n      };\r\n    }\r\n  }, [isOpen, handleCloseByEsc, handleCloseByOverlay]);\r\n\r\n  return (\r\n    <div className={`popup popup_type_error ${isOpen ? 'popup_opened' : ''}`}>\r\n      <div className=\"popup__error-container error-identification\" onMouseDown={handleCloseByOverlay}>\r\n        <div className=\"popup__error error-identification\">\r\n          <img className=\"popup__error-icon error-identification\" src={errorIcon} alt=\"Картинка ошибки\"/>\r\n          <h2 className=\"popup__error-header error-identification\">Ошибка обращения к серверу:</h2>\r\n        </div>\r\n        <p\r\n          className=\"popup__error-caption error-identification\">\r\n          {`${errorMessage.status} ${errorMessage.message} url=${errorMessage.url}`}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorPopup;\r\n","class Api {\r\n  _url\r\n  _headers\r\n\r\n  constructor(property) {\r\n    this._url = property.url;\r\n    this._headers = property.headers;\r\n  }\r\n\r\n  _processingResult(result) {\r\n    if (result.ok) {\r\n      return result.json();\r\n    } else {\r\n      return Promise.reject({\r\n        status: result.status,\r\n        message: result.statusText,\r\n        url: result.url\r\n      });\r\n    }\r\n  }\r\n\r\n  getUserProperties() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      headers: this._headers\r\n    })\r\n      .then(result => {\r\n        return this._processingResult(result);\r\n      });\r\n  }\r\n\r\n  updateUserAvatar(linkAvatar) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: linkAvatar\r\n      })\r\n    })\r\n      .then(result => {\r\n        return this._processingResult(result);\r\n      });\r\n  }\r\n\r\n  updateUserProperties(data) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        about: data.about\r\n      })\r\n    })\r\n      .then(result => {\r\n        return this._processingResult(result);\r\n      });\r\n  }\r\n\r\n  getAllCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n      headers: this._headers\r\n    })\r\n      .then(result => {\r\n        return this._processingResult(result);\r\n      });\r\n  }\r\n\r\n  addCard(data) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({name: data.name, link: data.link})\r\n    })\r\n      .then(result => {\r\n        return this._processingResult(result);\r\n      });\r\n  }\r\n\r\n  deleteCard(idCard) {\r\n    return fetch(`${this._url}/cards/${idCard}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers\r\n    })\r\n      .then(result => {\r\n        return this._processingResult(result);\r\n      });\r\n  }\r\n\r\n  setLikeCard(isLiked, id) {\r\n    const metodHtml = isLiked ? 'DELETE' : 'PUT';\r\n    return fetch(`${this._url}/cards/likes/${id}`, {\r\n      method: metodHtml,\r\n      headers: this._headers,\r\n    })\r\n      .then(result => {\r\n        return this._processingResult(result);\r\n      });\r\n  }\r\n}\r\n\r\nexport const apiServer = new Api({\r\n  url: 'https://mesto.nomoreparties.co/v1/cohort-27',\r\n  headers: {\r\n    authorization: '7da0d743-b2f7-439b-8a75-4db6d3ee0226',\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\n\r\n","import React, {useEffect, useState} from \"react\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport ImagePopup from \"./ImagePopup\";\nimport Spinner from \"./Spinner\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport ConfirmDeletePopup from \"./ConfirmDeletePopup\";\nimport ViewAuthorPopup from \"./ViewAuthorPopup\";\nimport ViewLikePopup from \"./ViewLikePopup\";\nimport ErrorPopup from \"./ErrorPopup\";\nimport {apiServer} from \"../utils/Api\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\n\nfunction App() {\n  const [isLoading, setIsLoading] = useState(true);\n  const [cards, setCards] = useState([]);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddCardPopupOpen, setIsAddCardPopupOpen] = useState(false);\n  const [isConfirmDeletePopupOpen, setIsConfirmDeletePopupOpen] = useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n\n  const [isViewAuthorPopupOpen, setIsViewAuthorPopupOpen] = useState(false);\n  const [isViewLikePopupOpen, setIsViewLikePopupOpen] = useState(false);\n  const [needUpdateViewLike, setNeedUpdateViewLike] = useState(false);\n  const [popupOutputArea, setPopupOutputArea] = useState({\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    width: 0,\n    height: 0,\n    clientY: 0\n  });\n\n  const [isErrorPopupOpen, setIsErrorPopupOpen] = useState(false);\n  const [errorMessage, setErrorMessage] = useState({status: null, message: null, url: null});\n\n  function showError(err) {\n    setErrorMessage(err);\n    setIsErrorPopupOpen(true);\n    console.log(err);\n  }\n\n  useEffect(() => {\n    apiServer.getUserProperties()\n      .then((userData) => {\n        setCurrentUser(userData);\n        // setIsLoading(false);\n      })\n      .catch(err => {\n        showError(err);\n      })\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }, []);\n\n  useEffect(() => {\n    apiServer.getAllCards()\n      .then((cardsData) => {\n        setCards(cardsData);\n      })\n      .catch(err => {\n        showError(err);\n      });\n  }, []);\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  async function handleUpdateUser(data) {\n    try {\n      const updateData = await apiServer.updateUserProperties(data);\n      setCurrentUser(updateData);\n      handleCloseAllPopups();\n    } catch (err) {\n      showError(err);\n    }\n  }\n\n  async function handleUpdateAvatar(link) {\n    try {\n      const updateData = await apiServer.updateUserAvatar(link);\n      setCurrentUser(updateData);\n      handleCloseAllPopups();\n    } catch (err) {\n      showError(err);\n    }\n  }\n\n  function handleAddCardClick() {\n    setIsAddCardPopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n    setIsImagePopupOpen(true);\n  }\n\n  function toggleLikeCard(card, isLiked, setUpdateCard) {\n    if (isLiked) {\n      card.likes = card.likes.filter((user) => user._id !== currentUser._id);\n    } else {\n      card.likes.push(currentUser);\n    }\n    setUpdateCard(true);\n    setNeedUpdateViewLike(true);\n  }\n\n  async function handleCardLike(card, setUpdateCard) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    //Добавляем/удаляем текущего юзера в массив лайков карточки до получения ответа\n    // от сервера для ускорения реакции интерфейса\n    toggleLikeCard(card, isLiked, setUpdateCard);\n    try {\n      await apiServer.setLikeCard(isLiked, card._id);\n    } catch (err) {\n      showError(err);\n      //обратим действие установочной функции так как сервер вернул ошибку\n      toggleLikeCard(card, !isLiked, setUpdateCard);\n    }\n  }\n\n  function handleCardDelete(card) {\n    setSelectedCard(card);\n    setIsConfirmDeletePopupOpen(true);\n  }\n\n  function handleEditCard(card) {\n    setSelectedCard(card);\n    setIsAddCardPopupOpen(true);\n  }\n\n  async function handleAddCard(data) {\n    const newCard = await apiServer.addCard(data);\n    setCards([newCard, ...cards]);\n  }\n\n  //Согласен что это лукавство, но в будущем эту функциональность обязательно реализую на бэке, а сейчас... так сойдет\n  //Функция временная, так как у сервера нет методов PATCH или PUT для карточек\n  //TODO: Переделать после реализации backend\n  async function handleSaveCard(card, data) {\n    //Сначала удаляем карточку по алгоритму удаления\n    await apiServer.deleteCard(card._id);\n    //Дальше добавляем карточку по алгоритму добавления\n    const newCard = await apiServer.addCard(data);\n    //Обновляем список по алгоритму лайка из рефа\n    setCards((cards) => cards.map((c) => c._id === card._id ? newCard : c));\n  }\n\n  async function handleSaveCardSubmit(card, data) {\n    try {\n      if (!card) {\n        await handleAddCard(data);\n      } else {\n        await handleSaveCard(card, data);\n      }\n      handleCloseAllPopups();\n    } catch (err) {\n      showError(err);\n    }\n  }\n\n  async function handleDeleteCardSubmit(card) {\n    try {\n      await apiServer.deleteCard(card._id);\n      setCards((cards) => {\n        return cards.filter((c) => c._id !== card._id);\n      });\n      handleCloseAllPopups();\n    } catch (err) {\n      showError(err);\n    }\n  }\n\n  function handleCloseAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddCardPopupOpen(false);\n    setIsConfirmDeletePopupOpen(false);\n    setIsImagePopupOpen(false);\n    setIsViewAuthorPopupOpen(false);\n    setIsViewLikePopupOpen(false);\n    setNeedUpdateViewLike(false);\n    setSelectedCard(null);\n  }\n\n  function handleCloseErrors() {\n    setIsErrorPopupOpen(false);\n  }\n\n  function checkInputValidation(input, setValid, setErrorMessage) {\n    if (!input.validity.valid) {\n      setValid(false);\n      setErrorMessage(input.validationMessage);\n    } else {\n      setValid(true);\n    }\n  }\n\n  function handleHoverCardCaption(card, area) {\n    setSelectedCard(card);\n    setPopupOutputArea(area);\n    setIsViewAuthorPopupOpen(true);\n  }\n\n  function handleOutHover() {\n    handleCloseAllPopups();\n  }\n\n  function handleHoverLikeCard(card, area) {\n    setSelectedCard(card);\n    setPopupOutputArea(area);\n    setIsViewLikePopupOpen(true);\n  }\n\n  //Ибо тернарный оператор выглядит уродливо\n  if (isLoading) {\n    return (<Spinner/>);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page__container\">\n        <Header/>\n        <Main cards={cards} card={selectedCard} onEditAvatar={handleEditAvatarClick}\n              onEditProfile={handleEditProfileClick}\n              onAddCard={handleAddCardClick}\n              onClose={handleCloseAllPopups} onCardClick={handleCardClick} onCardLike={handleCardLike}\n              onCardDelete={handleCardDelete} onEditCard={handleEditCard} onHoverCardCaption={handleHoverCardCaption}\n              onHoverLikeCard={handleHoverLikeCard} onOutHover={handleOutHover}/>\n\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={handleCloseAllPopups}\n                         onUpdateAvatar={handleUpdateAvatar} onCheckValidation={checkInputValidation}/>\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={handleCloseAllPopups}\n                          onUpdateUser={handleUpdateUser} onCheckValidation={checkInputValidation}/>\n        <AddPlacePopup isOpen={isAddCardPopupOpen} onClose={handleCloseAllPopups} onSaveCard={handleSaveCardSubmit}\n                       onCheckValidation={checkInputValidation} card={selectedCard}/>\n        <ConfirmDeletePopup card={selectedCard} isOpen={isConfirmDeletePopupOpen} onClose={handleCloseAllPopups}\n                            onDeleteCard={handleDeleteCardSubmit}/>\n        <ImagePopup currentCard={selectedCard} setCurrentCard={setSelectedCard} cards={cards} isOpen={isImagePopupOpen}\n                    onClose={handleCloseAllPopups}/>\n\n        <ViewAuthorPopup card={selectedCard} popupOutputArea={popupOutputArea} isOpen={isViewAuthorPopupOpen}/>\n\n        <ViewLikePopup card={selectedCard} popupOutputArea={popupOutputArea} isOpen={isViewLikePopupOpen}\n                       needUpdateViewLike={needUpdateViewLike}/>\n\n        <ErrorPopup isOpen={isErrorPopupOpen} errorMessage={errorMessage} onClose={handleCloseErrors}/>\n\n        <Footer/>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\n// import reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}